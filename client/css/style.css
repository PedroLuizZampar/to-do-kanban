:root {
	--bg: #f7f8fb;
	--fg: #0f172a;
	--muted: #5b6472;
	--accent: #3b82f6;
	--accent-600: #2563eb;
	--danger: #ef4444;
	--surface: #ffffff;
	--border: #e5e7eb;
	--shadow: 0 8px 24px rgba(15, 23, 42, 0.08);
	--dropdown-item-h: 40px;
	/* Sidebar sizing */
	--sidebar-w: 260px;
	--sidebar-min: 180px;
	--sidebar-max: 420px;
	--sidebar-collapsed-w: 64px;
}
* { box-sizing: border-box; }
body { margin: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial; background: linear-gradient(180deg, #f7f8fb, #eef2f7); color: var(--fg); }

/* Ocultaz a scrollbar vertical no body e no main */
html, body { height: 100%; }
body { overflow-x: auto; overflow-y: hidden; }
/* Em navegadores WebKit, oculta quaisquer trilhas visíveis (fallback extra) */
body::-webkit-scrollbar,
main::-webkit-scrollbar { overflow-x: auto; overflow-y: hidden; }

.topbar { display: flex; align-items: center; justify-content: space-between; padding: 14px 18px; border-bottom: 1px solid var(--border); position: sticky; top: 0; background: rgba(255,255,255,.7); backdrop-filter: blur(8px); z-index: 10; }
.brand { display: flex; align-items: center; gap: 8px; margin: 0; font-size: 18px; font-weight: 700; letter-spacing: .2px; }
.topbar .actions { display: flex; gap: 8px; }
select.board-select { background: #fff; color: var(--fg); border: 1px solid var(--border); border-radius: 10px; padding: 8px 10px; box-shadow: var(--shadow); }
/* Miniaturas de membros (topbar) */
.members-mini { display: inline-flex; align-items: center; gap: 6px; margin: 0 6px; }
.members-mini:hover { cursor: pointer; }
.members-mini .avatar-mini { width: 26px; height: 26px; font-size: 12px; }
.members-mini .avatar-mini.more { background: var(--muted); color: #fff; font-weight: 700; padding: 0 6px; display: inline-flex; align-items: center; justify-content: center; border-radius: 999px; border: 1px solid var(--border); cursor: pointer; }
.members-mini .avatar-mini.more:hover { filter: brightness(.95); }
.members-mini .avatar-mini img { width: 100%; height: 100%; object-fit: cover; border-radius: 999px; }
/* Miniaturas de membros (topbar) */
.members-mini { --members-avatar-size: 26px; display: inline-flex; align-items: center; gap: 0; margin: 0 6px; }
.members-mini .avatar-mini { width: var(--members-avatar-size); height: var(--members-avatar-size); font-size: 12px; cursor: pointer; border: 2px solid var(--surface); margin-left: calc(var(--members-avatar-size) * -0.2); border-radius: 999px; position: relative; z-index: 1; }
.members-mini .avatar-mini:first-child { margin-left: 0; }
.members-mini .avatar-mini:hover { z-index: 2; }
.members-mini .avatar-mini.more { background: var(--muted); color: #fff; font-weight: 700; padding: 0 6px; display: inline-flex; align-items: center; justify-content: center; border-radius: 999px; /* mantém o anel consistente */ border: 2px solid var(--surface); }
.members-mini .avatar-mini.more:hover { filter: brightness(.95); }
.members-mini .avatar-mini img { width: 100%; height: 100%; object-fit: cover; border-radius: 999px; }

/* Avatar miniatura do usuário */
.user-info { position: relative; display: inline-flex; align-items: center; gap: 8px; }
.user-info .avatar { 
  width: 32px; 
  height: 32px; 
  border-radius: 999px; 
  background: #c7d2fe; 
  color: #1e3a8a; 
  display: inline-flex; 
  align-items: center; 
  justify-content: center; 
  font-weight: 700; 
  border: 1px solid var(--border); 
  overflow: hidden; 
  cursor: pointer; 
  background-position: center;
}
.user-info .avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.user-info .user-menu { position: absolute; right: 0; top: calc(100% + 6px); background: #fff; border: 1px solid var(--border); border-radius: 10px; box-shadow: var(--shadow); min-width: 160px; }
.user-menu .user-menu-item { display: flex; align-items: center; gap: 8px; padding: 8px 10px; cursor: pointer; }
.user-menu .user-menu-item:hover { background: #f3f6fb; }
.user-menu .user-menu-item.danger { color: var(--danger); }

button { display: inline-flex; align-items: center; gap: 6px; background: var(--accent); color: white; border: none; border-radius: 10px; padding: 8px; cursor: pointer; box-shadow: var(--shadow); transition: transform .3s ease, box-shadow .2s ease, opacity .15s ease; }
button:hover { transform: translateY(-1px); box-shadow: 0 10px 28px rgba(2, 6, 23, .12); }
button:active { transform: translateY(0); }
button.btn-danger { background: var(--danger); }
button.btn-success { background: #10b981; }
button.btn-ghost { background: transparent; color: var(--fg); border: 1px solid var(--border); box-shadow: none; }
button.btn-ghost:hover { background: #f3f6fb; }
/* Ícones-only como danger/ghost */
.btn-danger .material-symbols-outlined { color: #fff; }
.btn-ghost .material-symbols-outlined { color: inherit; }
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
.btn-delete:hover { color: var(--danger); }
.btn-edit:hover { color: var(--accent) }
.btn-favorite:hover { color: goldenrod; }
.app { display: grid; grid-template-columns: var(--sidebar-w, 260px) 1fr; gap: 0; min-height: calc(100vh - 56px); }
.sidebar { border-right: 1px solid var(--border); background: rgba(255,255,255,.6); backdrop-filter: blur(8px); padding: 12px; display: flex; flex-direction: column; gap: 10px; position: relative; }
.sidebar-header { display: flex; align-items: center; justify-content: space-between; gap: 8px; font-weight: 700; color: var(--muted); padding: 4px 6px; }
.sidebar-head-left { display: inline-flex; align-items: center; gap: 8px; min-width: 0; }
.sidebar .btn-icon { padding: 0; width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; }
.sidebar .btn-icon .material-symbols-outlined { font-size: 18px; }
.boards-list { background-color: transparent; display: flex; flex-direction: column; gap: 8px; overflow-y: auto; }
.board-item { display: flex; align-items: center; justify-content: space-between; gap: 8px; padding: 8px 10px; border-radius: 10px; border: 1px solid var(--border); background: #fff; cursor: pointer; }
.board-item:hover { background: #f8fafc; }
.board-item.active { border-color: var(--board-color, var(--accent)); }
.board-item.dragging { opacity: .7; }
.board-item .title { flex: 1; min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.board-actions { flex-shrink: 0; }
.boards-list .board-item { outline: 2px solid transparent; outline-offset: -2px; }
.boards-list .board-item:hover { outline-color: var(--board-color, transparent); }
.boards-list .board-item.drag-over { outline-color: var(--board-color, transparent); }
.board-item .title { display: flex; align-items: center; gap: 8px; font-weight: 600; min-width: 0; }
.board-item .title .board-name { flex: 1; min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.sidebar.collapsed .board-item .title .material-symbols-outlined { width: 24px; text-align: center; }
.board-actions { display: flex; gap: 4px; }
.btn-new-board { width: 100%; justify-content: center; background: transparent; border: 1px dashed var(--muted); color: var(--muted); padding: 10px; border-radius: 10px; }

/* Resizer vertical para a sidebar */
.sidebar-resizer { position: absolute; top: 0; right: -3px; width: 6px; height: 100%; cursor: col-resize; opacity: 0; transition: opacity .2s ease; }
.sidebar:hover .sidebar-resizer { opacity: 1; }

/* Estado colapsado */
.sidebar.collapsed { width: var(--sidebar-collapsed-w, 56px) !important; padding-left: 8px; padding-right: 8px; }
.sidebar-collapsed-spacer { height: 4px; }
.sidebar.collapsed .sidebar-head-left { display: none; }
.app:has(.sidebar.collapsed) { grid-template-columns: var(--sidebar-collapsed-w, 56px) 1fr; }
.sidebar.collapsed .sidebar-head-left span:last-child,
.sidebar.collapsed .boards-list .title span:last-child,
.sidebar.collapsed .btn-new-board span:not(.material-symbols-outlined) { display: none; }
.sidebar.collapsed .boards-list .board-actions { display: none; }
.sidebar.collapsed .board-item { padding-left: 8px; padding-right: 8px; }
.sidebar.collapsed .board-item .title { justify-content: flex-start; gap: 0; }
.sidebar.collapsed .boards-list { padding-left: 6px; padding-right: 6px; }

/* Truncagem responsiva: já garantida por min-width:0 nos containers acima */

.board { display: flex; align-items: flex-start; gap: 18px; padding: 18px 4px 18px 4px; overflow-x: auto; overflow-y: hidden; height: calc(100vh - 68px); scrollbar-gutter: stable both-edges; }
/* Oculta barra horizontal nativa em navegadores suportados sem deslocar layout */
.board { scrollbar-width: thin; }
body { overscroll-behavior-x: none; }
/* Força largura mínima das colunas para evitar compressão que gera scrollbar duplicada */
.board .column { flex: 0 0 300px; }
.column { background: var(--surface); border: 1px solid var(--border); border-radius: 14px; min-width: 300px; display: flex; flex-direction: column; max-height: calc(100vh - 68px - 36px); overflow: hidden; box-shadow: var(--shadow); transition: box-shadow .2s ease, transform .15s ease; border-top: 4px solid var(--col, var(--accent)); }
.column:hover { box-shadow: 0 12px 32px rgba(2, 6, 23, .12); }
.column-header { display: flex; align-items: center; justify-content: space-between; padding: 12px; border-bottom: 1px solid var(--border); cursor: grab; }
.column-head-left { display: flex; align-items: center; gap: 8px; }
.drag-handle { color: #9aa3b2; }
.column-title { margin: 0; font-size: 14px; font-weight: 700; letter-spacing: .3px; }
.column-actions { display: flex; gap: 6px; }
.cards { padding: 12px; display: flex; flex-direction: column; gap: 10px; overflow-y: auto; min-height: 40px; max-height: calc(100% - 56px); /* 56px ~= header(44)+footer(12) */ }
.cards.drag-over { outline: 2px dashed var(--accent); outline-offset: -6px; background: #f8fbff; animation: pulse .6s ease infinite alternate; }
@keyframes pulse { from { background: #f8fbff; } to { background: #f0f7ff; } }
.card { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 12px; cursor: grab; box-shadow: var(--shadow); transition: transform .12s ease, box-shadow .2s ease; }
.card:hover { transform: translateY(-1px); box-shadow: 0 10px 24px rgba(2, 6, 23, .12); }
.card .card-title { margin-bottom: 6px; }
.card-due { display:inline-flex; align-items:center; gap:6px; font-size:12px; margin-bottom: 6px; padding:4px 6px; border-radius:8px; border:1px solid var(--border); }
.card-due .material-symbols-outlined { font-size:16px; }
.card-due.on-time { background:#ecfdf5; color:#065f46; border-color:#a7f3d0; }
.card-due.due-soon { background:#fffbeb; color:#92400e; border-color:#fde68a; }
.card-due.overdue { background:#fef2f2; color:#991b1b; border-color:#fecaca; }
.card-tags { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 8px; }
.card-progress { display:flex; align-items:center; gap:.5rem; margin-bottom:8px; }
.card-progress-bar { height:6px; background:var(--border); border-radius:999px; position:relative; flex:1; overflow:hidden; }
.card-progress-bar::after { content:""; position:absolute; left:0; top:0; bottom:0; width:0%; background:var(--accent); transition:width .2s ease; }
.card-progress-text { font-size:.75rem; color:#666; }
.card-progress.hidden { display:none; }
.tag { font-size: 14px; padding: 8px 8px; border-radius: 999px; border: 1px solid var(--border); background: #eef2ff; color: #e2e2e2; box-shadow: 0 1px 0 rgba(2, 6, 23, .04) inset; }
.card-actions { display: flex; gap: 6px; justify-content: flex-end; }
.card-assignees { display:flex; align-items:center; gap:4px; margin-bottom:6px; }
.avatar-mini { width:22px; height:22px; border-radius:999px; background: var(--muted); color: white; font-size:12px; font-weight:700; display:flex; align-items:center; justify-content:center; border:1px solid var(--border); overflow:hidden; }
.avatar-mini img { width:100%; height:100%; object-fit:cover; }
.avatar-mini.more { background: var(--muted); color: white; font-weight:600; }
.avatar-mini { position: relative; }
.avatar-mini .avatar-tip { position:absolute; bottom: 130%; left: 50%; transform: translateX(-50%); background:#111827; color:#fff; padding:2px 6px; border-radius:6px; font-size:11px; white-space:nowrap; box-shadow: var(--shadow); }

/* Pílulas de usuário (assignees) no picker */
.user-pill { display:inline-flex; align-items:center; gap:6px; padding:6px 8px; border-radius:999px; background:#eef2ff; border:1px solid var(--border); cursor:pointer; }
.user-pill img { width:18px; height:18px; border-radius:999px; object-fit:cover; border:1px solid var(--border); }
.user-pill .avatar-fallback { width:18px; height:18px; border-radius:999px; background:var(--muted); color: white; display:flex; align-items:center; justify-content:center; font-size:12px; font-weight:700; border:1px solid var(--border); }
.user-pill .user-name { font-size:12px; color:#111827; }

.column footer { padding: 8px 12px 12px; }
.column .btn-add-card { background: var(--col, var(--accent)); color: #fff; border: none; border-radius: 10px; padding: 8px 10px; box-shadow: var(--shadow); }
.column .btn-add-card:hover { filter: brightness(0.95); }

.column.dragging { opacity: .65; transform: scale(.98); }
.material-symbols-outlined { vertical-align: middle; font-size: 18px; }
.muted, .modal .muted, small.muted { color: var(--muted); }

/* Scrollbar estilizada (webkit) */
.board::-webkit-scrollbar, .cards::-webkit-scrollbar { height: 8px; width: 10px; }
.board::-webkit-scrollbar-thumb, .cards::-webkit-scrollbar-thumb { background: #d4dbe4; border-radius: 999px; border: 2px solid #f0f3f7; }
.board::-webkit-scrollbar-track, .cards::-webkit-scrollbar-track { background: transparent; }

/* Em telas largas, usar shadow fade nas extremidades para suavizar scroll horizontal */
.board { position: relative; }
.board::before, .board::after { content: ''; position: sticky; top:0; width: 24px; flex: 0 0 24px; pointer-events: none; z-index: 2; }
.board::before { left:0; background: linear-gradient(90deg, #f7f8fb, rgba(247,248,251,0)); margin-left:-18px; }
.board::after { right:0; background: linear-gradient(-90deg, #f7f8fb, rgba(247,248,251,0)); }

/* Ajustes para evitar gap visual no final da lista de colunas */
.board::after { content: ''; flex: 0 0 4px; }

@supports (overflow: overlay) {
	.board { overflow-x: overlay; }
}

.empty-board { font-size: 14px; color: var(--muted); padding: 40px 20px; opacity: .85; }

/* Responsivo */
@media (max-width: 720px) {
	.topbar .actions button span:not(.material-symbols-outlined) { display: none; }
	.topbar .actions button { padding: 10px; }
	.app { grid-template-columns: 1fr; }
	.sidebar { display: none; }
	.column { min-width: 86vw; }
}

/* Tile "Nova coluna" */
.btn-add-column { min-width: 200px; justify-content: center; background: transparent; border: 1px dashed var(--muted); color: var(--muted); padding: 14px 16px; border-radius: 12px; font-weight: 600; }
.btn-add-column:hover { background: #f0f7ff; }

.modal-backdrop { position: fixed; inset: 0; background: rgba(2,6,23,.35); backdrop-filter: blur(2px); }
.modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--surface); border: 1px solid var(--border); border-radius: 14px; width: 520px; max-width: calc(100vw - 24px); padding: 14px 8px 14px 12px; box-shadow: var(--shadow); max-height: calc(80vh); overflow: hidden; display: flex; flex-direction: column; }
.modal.modal-wide { width: min(900px, calc(100vw - 24px)); }
.modal .modal-content { overflow: auto; }
.modal .modal-content { overflow: auto; padding-right: 12px; }
.modal .row { margin-bottom: 12px; }
.modal label { display: block; margin-bottom: 6px; color: var(--muted); font-size: 12px; }
.modal .separator { margin: 10px 0px; }
.modal .card-title { font-size: 1.6rem; margin: 12px 0; }
.modal input, .modal textarea, .modal select { width: 100%; background: #f9fafb; color: var(--fg); border: 1px solid var(--border); border-radius: 10px; padding: 10px; }
.modal textarea { min-height: 90px; resize: vertical; max-width: 100%; }
.modal footer { display: flex; justify-content: flex-end; gap: 8px; margin-top: 12px; }

/* Checklist (modal de tarefa) */
.checklist { display:flex; flex-direction:column; gap:.5rem; }
.checklist .checklist-item:last-child { margin-bottom: 10px; }
.checklist-item { display:flex; align-items:center; gap:.5rem; }
.checklist-item input[type="checkbox"] { width:16px; height:16px; }
.checklist-item input[type="text"] { flex:1; }
.checklist-actions { display:flex; gap:.5rem; }

/* Dropdown custom */
.dropdown { position: relative; }
.dropdown-toggle { width: 100%; display: inline-flex; align-items: center; justify-content: space-between; background: #f9fafb; color: var(--fg); border: 1px solid var(--border); border-radius: 10px; padding: 10px; }
.dropdown-toggle .material-symbols-outlined { color: var(--muted); }
.dropdown-label { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.dropdown-menu { position: static; margin: 0 auto; width: 97%; background: #fff; border: 1px solid var(--border); border-radius: 0px 0px 10px 10px; box-shadow: var(--shadow); max-height: none; overflow-y: visible; }
.dropdown + .dropdown { margin-left: 6px; }
.dropdown .pos-menu { max-height: calc(var(--dropdown-item-h) * 3); overflow-y: auto; }
/* Menus longos (categorias e templates) com altura limitada como o de posição */
.dropdown .limited-menu { max-height: calc(var(--dropdown-item-h) * 3); overflow-y: auto; }
.dropdown-item { color: black; width: 100%; text-align: left; background: transparent; border: none; box-shadow: none; border-radius: none; display: block; }
.dropdown-item:hover { background: #f3f6fb; }
.checkrow { display: flex; align-items: center; gap: 8px; padding: 6px 8px; border-radius: 8px; }
.checkrow:hover { background: #f3f6fb; }
.checkrow .pill { font-size: 12px; padding: 4px 8px; border-radius: 999px; background: #eef2ff; border: 1px solid var(--border); }

/* Tag picker */
.tag-picker { display: flex; flex-direction: column; gap: 8px; }
.tag-quick-picks { display: flex; gap: 6px; flex-wrap: wrap; }
.tag-pick { background: #eef2ff; color: #1e3a8a; border: 1px solid var(--border); padding: 6px 8px; border-radius: 999px; }
.tag-pick.active { background: #1e3a8a; color: #fff; border-color: #1e3a8a; }

/* Color picker aprimorado */
.color-row .color-field { display: flex; align-items: center; gap: 10px; }
.color-input { width: 52px; height: 36px; padding: 0; border-radius: 8px; }
.color-swatch { width: 28px; height: 28px; border-radius: 8px; border: 1px solid var(--border); box-shadow: inset 0 1px 0 rgba(0,0,0,.06); }
.color-quick { display: flex; gap: 6px; flex-wrap: wrap; }
.color-dot { width: 24px; height: 24px; padding: 0; border-radius: 999px; border: 2px solid #fff; box-shadow: 0 1px 3px rgba(2,6,23,.15); background: var(--c); cursor: pointer; }
.color-dot:hover { transform: translateY(-1px); }

/* Tag manager layout */
.tag-list { display: flex; flex-direction: column; gap: 8px; margin: 8px 0 4px; }
.tag-row { display: flex; align-items: center; justify-content: space-between; background: #f8fafc; border: 1px solid var(--border); border-radius: 10px; padding: 8px 10px; cursor: grab; }
.tag-left { display: flex; align-items: center; gap: 8px; }
.tag-actions { display: flex; gap: 6px; }
/* feedback visual ao arrastar linhas (tags/templates) */
.tag-row.dragging { opacity: .8; cursor: grabbing; }
/* handle de arrasto reaproveita classe existente */
.tag-left .drag-handle { color: #9aa3b2; cursor: grab; }

/* Buckets de tags (duas colunas) */
.tag-dual { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.tag-bucket-wrap { display: flex; flex-direction: column; gap: 8px; }
.tag-bucket { display: flex; flex-wrap: wrap; gap: 6px; min-height: 38px; background: #f9fafb; border: 1px dashed var(--border); border-radius: 10px; padding: 8px; }
.tag-toggle { cursor: pointer; }

/* Animação de entrada do modal */
.modal:not(.hidden) { animation: pop .18s cubic-bezier(.2,.8,.2,1); }
@keyframes pop { from { transform: translate(-50%, -47%) scale(.96); opacity: .6; filter: blur(1px);} to { transform: translate(-50%, -50%) scale(1); opacity: 1; filter: blur(0);} }

/* Micro animações */
.card { animation: cardIn .2s ease; }
@keyframes cardIn { from { transform: translateY(2px); opacity: .0; } to { transform: translateY(0); opacity: 1; } }
.column { animation: colIn .22s ease; }
@keyframes colIn { from { transform: translateY(4px); opacity: .0; } to { transform: translateY(0); opacity: 1; } }

/* Toast */
.toast { position: fixed; bottom: 18px; left: 50%; transform: translateX(-50%); background: #0f172a; color: #fff; padding: 10px 14px; border-radius: 12px; box-shadow: var(--shadow); border: 1px solid rgba(255,255,255,.1); }
.toast.toast-error { background: #b91c1c; }

.hidden { display: none !important; }

/* Help modal */
.help-list { list-style: none; padding: 0; margin: 8px 0; display: grid; gap: 6px; }
.help-list code { background: #eef2ff; color: #1e3a8a; padding: 2px 6px; border-radius: 6px; border: 1px solid var(--border); font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 12px; }

/* Upload de avatar estilizado */
.file-upload { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.file-upload .file-input { display: none; }
.file-upload .file-label { font-size: 14px; display: inline-flex; align-items: center; gap: 6px; background: transparent; color: #000; border: 1px dashed #bbb; border-radius: 10px; padding: 8px 12px; cursor: pointer; box-shadow: var(--shadow); }
.file-upload .file-label:hover { filter: brightness(0.95); }
.file-upload .file-name { font-size: 12px; color: var(--muted); }

/* Markdown editor */
.md-editor { display: flex; flex-direction: column; gap: .5rem; }
.md-toolbar { display: flex; align-items: center; gap: .3rem; }
.md-toolbar button { 
  color: #000; 
  padding: .25rem .5rem; 
  width: 36px; 
  height: 36px; 
  border: 1px solid var(--border); 
  background: #f9fafb; 
  border-radius: .375rem; 
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
}
.md-toolbar button:hover { background: #f3f4f6; }
.md-toolbar .md-sep { color: #9ca3af; padding: 0 .25rem; }
.md-panels { display: grid; grid-template-columns: 1fr 1fr; gap: .5rem; }
.md-input textarea { width: 100%; min-height: 140px; resize: none; overflow: hidden; line-height: 1.3; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial; }
.markdown-preview { width: 100%; min-height: 140px; border: 1px solid var(--border); border-radius: .375rem; padding: .5rem .6rem; background: #fff; overflow: auto; }
.markdown-preview { line-height: 1.3; }
.markdown-preview br { display: block; content: ""; margin: 2px 0; }
.markdown-preview h1,.markdown-preview h2,.markdown-preview h3,.markdown-preview h4,.markdown-preview h5,.markdown-preview h6{ margin: .15rem 0; }
.markdown-preview p { margin: .25rem 0; }
.markdown-preview ul, .markdown-preview ol { margin: .25rem .5rem; padding-left: 1.2rem; }
.markdown-preview li { margin: .15rem 0; }
.markdown-preview code{ background:#bebebe; color: #555555; padding: .08rem .22rem; border-radius: .25rem; }
.markdown-preview pre{ background:#bebebe; color:#555555; padding:.5rem .75rem; border-radius:.375rem; overflow:auto; }
.markdown-preview a{ color:#2563eb; text-decoration: underline; }
.markdown-preview.empty { color: var(--muted); font-style: italic; }

/* Mostrar somente preview quando não estiver editando */
.md-editor .md-toolbar, .md-editor .md-input { display: none; }
.md-editor.editing .md-input { display: block; }
.md-editor.editing .md-toolbar { display: flex; }
.md-editor:not(.editing) .md-panels { grid-template-columns: 1fr; }

/* Anexos */
.attachments-section { display: flex; flex-direction: column; gap: 8px; }
.dropzone { display: inline-flex; align-items: center; gap: 6px; border: 1px dashed #bbb; border-radius: 10px; padding: 8px 12px; background: transparent; color: #000; cursor: pointer; }
.dropzone.drag-over { background: #f3f6fb; }
.attach-thumbs { display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 8px; }
.attach-thumb { position: relative; width: 100%; aspect-ratio: 1 / 1; border: 1px solid var(--border); border-radius: 8px; overflow: hidden; background: #f9fafb; display: flex; align-items: center; justify-content: center; }
.attach-thumb img { width: 100%; height: 100%; object-fit: cover; cursor: zoom-in; }
.attach-thumb .btn-delete { position: absolute; top: 4px; right: 4px; padding: 4px; border-radius: 8px; backdrop-filter: blur(2px); background: rgba(255,255,255,.85); border-color: rgba(0,0,0,.08); }
.attach-thumb .btn-delete:hover { background: rgba(255,255,255,1); }
.attach-thumb.pending { opacity: 0.8; }
.attach-thumb .pending-badge { position:absolute; bottom:4px; right:4px; background:rgba(17,24,39,0.8); color:#fff; font-size:10px; padding:2px 4px; border-radius:3px; }
.image-viewer .image-viewer-body { max-height: 60vh; overflow: auto; }
.image-viewer .image-viewer-body img { max-width: min(800px, 90vw); max-height: 60vh; display: block; margin: 0 auto; border-radius: 8px; object-fit: contain; }

